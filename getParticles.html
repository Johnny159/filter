<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<head>
<title>图像粒子化</title>
<link rel="stylesheet" href="css/examples.css" />
</head>
<body>
<canvas id="canvas" width="640" height="800"></canvas>
</body>
</html>

<script src="js/examples.js"></script> 
<script src="js/Filter.js"></script>

<script type="text/javascript">

window.onload = function(){
	
	initCanvas({
		imgW:195,
		imgH:195,
		imgMargin:5,
		rowLen:5
	})
	
	
	var imgO = new Image();
	//imgO.width = 200;
	//imgO.height = 200;
	imgO.onload = function(){
		
		var F1 =  FILTER.Create(this);
		
		
		F1.getParticles({
			pieceW:10,
			pieceH:10,
			regX:0.5,
			regY:0.5,
			add:function(item){
				cont2D.fillStyle='rgba('+ item.r + ','+ item.g + ','+ item.b + ','+ item.a +')';
				cont2D.fillRect((item.x*10+400),(item.y*10+400),5,5);
			}
		});
		
		
		
		
		
		
		
		
		
		
        /*var arr = [];
		var boxW = 6, boxH = 6;
		var w = F1.imgData.width, h = F1.imgData.height;
		var d = F1.imgData.data
		
		for(var y = 0; y < h; y += boxH){
			for(var x = 0; x < w; x += boxW){
				var i = (y*w+x)*4;
				arr.push({ r:d[i], g: d[i+1], b: d[i+2], a: d[i+3], x: x, y: y })
				
				cont2D.fillStyle='rgba('+ d[i] + ','+ d[i+1] + ','+ d[i+2] + ','+ d[i+3] +')';
				cont2D.fillRect(x,y,3,3);
			}
		}*/
		
		
		
		
		
		
		
	};
	imgO.src='images/7.jpg';
    
	
	
}








</script>